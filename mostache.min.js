//mostache, by dandavis [CCBY4]
(function(B,g){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?g(exports):"function"==typeof define&&define.amd?define(["exports"],g):(B.Mustache={},g(Mustache)),g.global=B})(this,function mustacheFactory(g){function w(b){return"function"==typeof b}function C(b,c){return b!=H&&"object"==typeof b&&c in b}function I(b,c){function a(a){"string"==typeof a&&(a=a.split(J,2));if(!x(a)||2!==a.length)throw Error("Invalid tags: "+a);u=new RegExp(a[0].replace(y,"\\$&")+"\\s*"),q=new RegExp("\\s*"+a[1].replace(y,"\\$&")),D=new RegExp("\\s*"+("}"+a[1]).replace(y,"\\$&"))}if(!b)return[];var e=[],d=[],m=[],k=!1,f=!1,u,q,D;a(c||g.tags);for(var n=new v(b),p,l,t,h;n.tail;){p=n.pos;if(t=n.scanUntil(u)){h=0;for(var r=t.length;h<r;++h)if(l=t.charAt(h),K.test(l)?m.push(d.length):f=!0,d.push(["text",l,p,p+1]),p+=1,"\n"===l){if(k&&!f)for(;m.length;)delete d[m.pop()];else m=[];f=k=!1}}if(!n.scan(u))break;k=!0,l=n.scan(L)||"name",n.scan(M),"="===l?(t=n.scanUntil(E),n.scan(E),n.scanUntil(q)):"{"===l?(t=n.scanUntil(D),n.scan(N),n.scanUntil(q),l="&"):t=n.scanUntil(q);if(!n.scan(q))throw Error("Unclosed tag at "+n.pos);h=[l,t,p,n.pos],d.push(h);if("#"===l||"^"===l)e.push(h);else if("/"===l){l=e.pop();if(!l)throw Error('Unopened section "'+t+'" at '+p);if(l[1]!==t)throw Error('Unclosed section "'+l[1]+'" at '+p)}else"name"===l||"{"===l||"&"===l?f=!0:"="===l&&a(t)}if(l=e.pop())throw Error('Unclosed section "'+l[1]+'" at '+n.pos);return O(P(d))}function P(b){for(var c=[],a,e,d=0,m=b.length;d<m;++d)(a=b[d])&&(e&&"text"===a[0]&&"text"===e[0]?(e[1]+=a[1],e[3]=a[3]):(c.push(a),e=a));return c}function O(b){for(var c=[],a=c,e=[],d,m=0,k=b.length;m<k;++m)switch(d=b[m],d[0]){case"#":case"^":a.push(d),e.push(d),a=d[4]=[];break;case"/":a=e.pop(),a[5]=d[2],a=0<e.length?e[e.length-1][4]:c;break;default:a.push(d)}return c}function v(b){this.tail=this.string=b,this.pos=0}function r(b,c){this.view=b,this.cache={".":this.view},this.parent=c}function h(){this.cache={}}var Q=Object.prototype.toString,x=Array.isArray||function(b){return"[object Array]"===Q.call(b)},H,R=/\{\{!([\w\.]+?)\}\}/g,S=/(\W)@([#\^!\/\|\.\)\(]?[\w\.$|]+)/g,F=/\s*\=\s*/,T=/\s*\:\s*/,U=/\s*\,\s*/,V=/\s*\|\s*/,G=/\{INDEX\}/g,W=/[&<>"'\/]/g,y=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,z=/\{SEP\}([\w\W]+?)\{\/SEP\}/g,K=/\S/,X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},M=/\s*/,J=/\s+/,E=/\s*=/,N=/\s*\}/,L=/#|\^|\/|>|\{|&|=|!/;v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(b){var c=this.tail,a,e;return a=c.match(b),a&&0===a.index?(e=a[0],this.tail=c.substring(e.length),this.pos+=e.length,e):""},v.prototype.scanUntil=function(b){b=this.tail.search(b);var c;switch(b){case-1:c=this.tail,this.tail="";break;case 0:c="";break;default:c=this.tail.substring(0,b),this.tail=this.tail.substring(b)}return this.pos+=c.length,c},r.prototype.push=function(b){return new r(b,this)},r.prototype.lookup=function(b){var c=this.cache,a,e,d,m=[];-1!==b.indexOf("!=")&&(d=b.trim().split(F),b=d[0].slice(0,-1),c[b]==d[1]&&c["."][b]==d[1]&&(b=""),d=void 0),-1!==b.indexOf("=")&&(d=b.trim().split(F),b=d[0],c[b]!=d[1]&&c["."][b]!=d[1]&&(b=""),d=void 0),-1!==b.indexOf(":")&&(d=b.trim().split(T),b=d[0],c.__NAME=d[1],d=void 0),-1!==b.indexOf("|")&&(d=b.trim().split(V).map(function(a,b){return"."===a.slice(0,1)&&(m[b-1]=!0,a=a.slice(1)),a}),b=d.shift());if(void 0==(a=c[b])){for(var k=this,f,u,h=!1;k;){if(0<b.indexOf("."))for(a=k.view,f=b.split("."),u=0,"__"===f[0]&&!k.parent&&f.shift(),e=f.length;void 0!=a&&u<e;)u===e-1&&(h=C(a,f[u])),a=a[f[u++]];else a=k.view[b],h=C(k.view,b);if(h)break;k=k.parent}c[b]=a}return void 0!==d&&d.forEach(function(c,e){var d=c.split("(");c=d.shift(),d.length&&(d=d[0].trim().split(")")[0].trim().split(U).map(function(a){try{return JSON.parse(a)}catch(b){return a}}));var f=function(a,b){return b.split(/[\.,]/).reduce(function(a,b){return a&&a[b]},a)}(m[e]?void 0===a?b:a:mustacheFactory.global,c);if("function"==typeof f){void 0===a&&(a=b);try{if(m[e])d.length?a=f.apply(a,d):a=f.call(a);else if(d.length)switch(d.length){case 1:return a=f(a,d[0]);case 2:return a=f(a,d[0],d[1]);case 3:return a=f(a,d[0],d[1],d[2]);default:return f.apply(this,[a].concat(d))}else a=f(a)}catch(k){}}}),w(a)&&(String(a).indexOf("[native code]"),a=a.call(this.view)),a},h.prototype.clearCache=function(){this.cache={}},h.prototype.parse=function(b,c){var a=this.cache,e=a[b];return void 0==e&&(e=a[b]=I(b,c)),e},h.prototype.render=function(b,c,a){var e=this.parse(b);return c=c instanceof r?c:new r(c),this.renderTokens(e,c,a,b)},h.prototype.renderTokens=function(b,c,a,e){for(var d="",m,k,f,h=0,g=b.length;h<g;++h){f=void 0,m=b[h],k=m[0];switch(k){case"#":f=this.renderSection(m,c,a,e);break;case"^":f=this.renderInverted(m,c,a,e);break;case">":f=this.renderPartial(m,c,a,e);break;case"&":f=this.unescapedValue(m,c);break;case"name":f=this.escapedValue(m,c);break;case"text":f=this.rawValue(m)}void 0!==f&&(d+=f)}return d},h.prototype.renderSection=function(b,c,a,e){function d(b){return h.render(b,c,a)}var h=this,k="",f=c.lookup(b[1]),g="$1";if(f){if(x(f))for(var q=0,r=f.length;q<r;++q)g=r-1===q?"":"$1",k+=this.renderTokens(b[4],c.push(f[q]),a,e).replace(G,q+1).replace(z,g);else if("object"==typeof f||"string"==typeof f||"number"==typeof f)if(void 0!=f&&"object"==typeof f&&c.cache.__NAME)for(var n in f){var p=f[n],g=p;if("object"==typeof p){p={},p[c.cache.__NAME]=n;for(var l in g)g.hasOwnProperty(l)&&(p[l]=g[l])}else p=new p.constructor(p),p[c.cache.__NAME]=n;g=r-1===q?"":"$1",k+=this.renderTokens(b[4],c.push(p),a,e).replace(G,n).replace(z,g)}else k+=this.renderTokens(b[4],c.push(f),a,e).replace(z,g);else if(w(f)){if("string"!=typeof e)throw Error("Cannot use higher-order sections without the original template");f=f.call(c.view,e.slice(b[3],b[5]),d),void 0!=f&&(k+=f)}else k+=this.renderTokens(b[4],c,a,e);return k}},h.prototype.renderInverted=function(b,c,a,e){var d=c.lookup(b[1]);if(!d||x(d)&&0===d.length)return this.renderTokens(b[4],c,a,e)},h.prototype.renderPartial=function(b,c,a){if(a){var e=String(b[1]).trim().split(/\s+/);b=a[b[1]],w(a)&&(b=a(e[0],e.slice(1),c.view));if(void 0!=b)return this.renderTokens(this.parse(b),c,a,b)}},h.prototype.unescapedValue=function(b,c){var a=c.lookup(b[1]);if(void 0!=a)return a},h.prototype.escapedValue=function(b,c){var a=c.lookup(b[1]);if(void 0!=a)return g.escape(a)},h.prototype.rawValue=function(b){return b[1]},g.name="mustache.js",g.version="2.1.3",g.tags=["{{","}}"];var A=new h;g.clearCache=function(){return A.clearCache()},g.parse=function(b,c){return A.parse(b,c)},g.render=function c(a,e,d){if("string"!=typeof a)throw e=TypeError,a=x(a)?"array":typeof a,new e('Invalid template! Template should be a "string" but "'+a+'" was given as the first argument for mustache#render(template, view, partials)');return-1!==a.indexOf("{{@@}}")&&(a=a.replace(S,"$1{{$2}}")),-1!==a.indexOf("<@")&&-1!==a.indexOf("@>")&&"{{=<@ @>=}}"!=a.slice(0,11)&&(console.log(a),a=c("{{=<@ @>=}} "+a,e,d||{}),console.info(a)),A.render(a.replace(R,"{{/$1}}{{^$1}}"),e,d)},g.to_html=function(c,a,e,d){c=g.render(c,a,e);if(!w(d))return c;d(c)},g.escape=function(c){return String(c).replace(W,function(a){return X[a]})},g.Scanner=v,g.Context=r,g.Writer=h});
